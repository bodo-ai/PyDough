ROOT(columns=[('transaction_id', transaction_id)], orderings=[(transaction_id):asc_first])
 FILTER(condition=shares < cust_max_shares & shares >= cust_ticker_max_shares, columns={'transaction_id': transaction_id})
  JOIN(condition=t0.customer_id_3 == t1.sbTxCustId & t0.ticker_id_4 == t1.sbTxTickerId, type=INNER, cardinality=PLURAL_FILTER, columns={'cust_max_shares': t0.cust_max_shares, 'cust_ticker_max_shares': t0.cust_ticker_max_shares, 'shares': t1.sbTxShares, 'transaction_id': t1.sbTxId})
   JOIN(condition=t0.customer_id == t1.customer_id, type=INNER, cardinality=PLURAL_FILTER, columns={'cust_max_shares': t0.cust_max_shares, 'cust_ticker_max_shares': t1.cust_ticker_max_shares, 'customer_id_3': t1.customer_id, 'ticker_id_4': t1.ticker_id})
    AGGREGATE(keys={'customer_id': customer_id}, aggregations={'cust_max_shares': MAX(cust_ticker_max_shares)})
     AGGREGATE(keys={'customer_id': sbTxCustId, 'ticker_id': sbTxTickerId}, aggregations={'cust_ticker_max_shares': MAX(sbTxShares)})
      SCAN(table=main.sbTransaction, columns={'sbTxCustId': sbTxCustId, 'sbTxShares': sbTxShares, 'sbTxTickerId': sbTxTickerId})
    AGGREGATE(keys={'customer_id': sbTxCustId, 'ticker_id': sbTxTickerId}, aggregations={'cust_ticker_max_shares': MAX(sbTxShares)})
     SCAN(table=main.sbTransaction, columns={'sbTxCustId': sbTxCustId, 'sbTxShares': sbTxShares, 'sbTxTickerId': sbTxTickerId})
   SCAN(table=main.sbTransaction, columns={'sbTxCustId': sbTxCustId, 'sbTxId': sbTxId, 'sbTxShares': sbTxShares, 'sbTxTickerId': sbTxTickerId})
